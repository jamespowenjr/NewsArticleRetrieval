package ru.algorithmist.jquant.math;

import junit.framework.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

@RunWith(JUnit4.class)
public class GrangerTestCase {

    @Test
    public void testGranger() throws Exception {

        double[] chickenData = new double[] {
                468491,
                449743,
                436815,
                444523,
                433937,
                389958,
                403446,
                423921,
                389624,
                418591,
                438288,
                422841,
                476935,
                542047,
                582197,
                516497,
                523227,
                467217,
                499644,
                430876,
                456549,
                430988,
                426555,
                398156,
                396776,
                390708,
                383690,
                391363,
                374281,
                387002,
                369484,
                366082,
                377392,
                375575,
                382262,
                394118,
                393019,
                428746,
                425158,
                422096,
                433280,
                421763,
                404191,
                408769,
                394101,
                379754,
                378361,
                386518,
                396933,
                400585,
                392110,
                384838,
                378609,
                364584
        };
        double[] eggData = new double[] {
                3581,
                3532,
                3327,
                3255,
                3156,
                3081,
                3166,
                3443,
                3424,
                3561,
                3640,
                3840,
                4456,
                5000,
                5366,
                5154,
                5130,
                5077,
                5032,
                5148,
                5404,
                5322,
                5323,
                5307,
                5402,
                5407,
                5500,
                5442,
                5442,
                5542,
                5339,
                5358,
                5403,
                5345,
                5435,
                5474,
                5540,
                5836,
                5777,
                5629,
                5704,
                5806,
                5742,
                5502,
                5461,
                5382,
                5377,
                5408,
                5608,
                5777,
                5825,
                5625,
                5800,
                5656
        };

        Assert.assertEquals(0.6238, GrangerTest.granger(eggData, chickenData, 3), 0.0001);
        Assert.assertEquals(0.002966, GrangerTest.granger(chickenData, eggData, 3), 0.000001);
    }

}
